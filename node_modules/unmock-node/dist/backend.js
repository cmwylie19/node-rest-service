"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const unmock_core_1 = require("unmock-core");
const fs_service_def_loader_1 = require("./fs-service-def-loader");
const node_interceptor_1 = require("./interceptor/node-interceptor");
const filesystem_logger_1 = require("./loggers/filesystem-logger");
const snapshotter_1 = require("./loggers/snapshotter");
class NodeBackend extends unmock_core_1.Backend {
    constructor(config) {
        const servicesDirectory = config && config.servicesDirectory;
        const listeners = [
            new filesystem_logger_1.default({
                directory: servicesDirectory,
            }),
            snapshotter_1.default.getOrUpdateSnapshotter({}),
        ];
        const interceptorFactory = (config && config.interceptorFactory) ||
            ((options) => new node_interceptor_1.default(options));
        const serviceDefLoader = fs_service_def_loader_1.default(servicesDirectory);
        super({
            interceptorFactory,
            listeners,
            serviceDefLoader,
        });
    }
}
exports.default = NodeBackend;
//# sourceMappingURL=backend.js.map