"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const appRootPath = require("app-root-path");
const debug_1 = require("debug");
const fs = require("fs");
const lodash_1 = require("lodash");
const path = require("path");
const debugLog = debug_1.default("unmock:node:utils");
exports.resolveUnmockRootDirectory = () => appRootPath.resolve("__unmock__");
exports.resolveUnmockDirectories = () => {
    const defaultUnmockDirectories = [
        exports.resolveUnmockRootDirectory(),
        appRootPath.resolve("node_modules/@unmock"),
        path.resolve(`${process.cwd()}/__unmock__`),
        path.resolve(`${process.cwd()}/node_modules/@unmock`),
    ];
    const triedDirectories = process.env.UNMOCK_SERVICES_DIRECTORY
        ? defaultUnmockDirectories.concat(path.resolve(process.env.UNMOCK_SERVICES_DIRECTORY))
        : defaultUnmockDirectories;
    const uniqueTriedDirectories = lodash_1.uniq(triedDirectories);
    debugLog(`Checking for directories: ${triedDirectories}`);
    return uniqueTriedDirectories.filter((directory) => fs.existsSync(directory) && fs.statSync(directory).isDirectory());
};
//# sourceMappingURL=utils.js.map