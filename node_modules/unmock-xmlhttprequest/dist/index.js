"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const xmlhttprequest_1 = require("./xmlhttprequest");
exports.replaceOpenAndReturnOriginal = xmlhttprequest_1.default;
let xmlhttprequestInterceptor;
class XMLHttpRequestInterceptor {
    constructor(onSerializedRequest) {
        this.originalXMLHttpRequestOpen = xmlhttprequest_1.default(onSerializedRequest);
    }
    disable() {
        if (this.originalXMLHttpRequestOpen) {
            XMLHttpRequest.prototype.open = this.originalXMLHttpRequestOpen;
        }
    }
}
exports.XMLHttpRequestInterceptor = XMLHttpRequestInterceptor;
exports.default = {
    on(onSerializedRequest) {
        this.off();
        xmlhttprequestInterceptor = new XMLHttpRequestInterceptor(onSerializedRequest);
        return xmlhttprequestInterceptor;
    },
    off() {
        if (xmlhttprequestInterceptor) {
            xmlhttprequestInterceptor.disable();
            xmlhttprequestInterceptor = undefined;
        }
    },
};
//# sourceMappingURL=index.js.map