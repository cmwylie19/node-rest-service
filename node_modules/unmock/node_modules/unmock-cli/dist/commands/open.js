"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const child_process = require("child_process");
const glob = require("glob");
const logger_1 = require("../utils/logger");
exports.open = (hash, options) => {
    const logger = new logger_1.default();
    const editor = options.editor || process.env.EDITOR || "vi";
    glob(`${process.cwd()}/**/${hash}/response.json`, { dot: true, nosort: true }, (e, matches) => {
        if (e || matches.length !== 1) {
            logger.log(e || matches.length === 0
                ? `Could not find ${hash}`
                : `Too many matches: ${matches}`);
            return;
        }
        const path = matches[0];
        const child = child_process.spawn(editor, [path], {
            stdio: "inherit",
        });
        child.on("exit", () => {
            logger.log(`Done editing ${hash}.`);
        });
    });
};
//# sourceMappingURL=open.js.map